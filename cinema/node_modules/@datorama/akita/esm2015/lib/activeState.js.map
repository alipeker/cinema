{"version":3,"file":"activeState.js","sourceRoot":"ng://@datorama/akita/","sources":["lib/activeState.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,aAAa,CAAC;AACxC,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAC;AAEpC,YAAY;AACZ,MAAM,UAAU,cAAc,CAAI,KAAqB;IACrD,OAAO,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;AACxC,CAAC;AAED,YAAY;AACZ,MAAM,UAAU,kBAAkB,CAAC,MAAW;IAC5C,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC;AACzB,CAAC;AAED,YAAY;AACZ,MAAM,UAAU,mBAAmB,CAAI,EAAE,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAqD;IACjH,IAAI,kBAAkB,CAAC,MAAM,CAAC,EAAE;QAC9B,OAAO,iBAAiB,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;KACvC;IAED,IAAI,SAAS,CAAC,QAAQ,EAAE,MAAM,CAAC,KAAK,KAAK,EAAE;QACzC,OAAO,IAAI,CAAC;KACb;IAED,OAAO,MAAM,CAAC;AAChB,CAAC;AAED,YAAY;AACZ,MAAM,UAAU,iBAAiB,CAAC,iBAAuB,EAAE,MAAY;IACrE,MAAM,QAAQ,GAAG,iBAAiB,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACzE,uDAAuD;IACvD,IAAI,QAAQ,CAAC,MAAM,KAAK,iBAAiB,CAAC,MAAM,EAAE;QAChD,OAAO,iBAAiB,CAAC;KAC1B;IAED,OAAO,QAAQ,CAAC;AAClB,CAAC","sourcesContent":["import { ActiveState, EntityState, ID, IDS, MultiActiveState } from './types';\nimport { hasEntity } from './hasEntity';\nimport { isArray } from './isArray';\n\n// @internal\nexport function hasActiveState<E>(state: EntityState<E>): state is EntityState<E> & (ActiveState | MultiActiveState) {\n  return state.hasOwnProperty('active');\n}\n\n// @internal\nexport function isMultiActiveState(active: IDS): active is ID[] {\n  return isArray(active);\n}\n\n// @internal\nexport function resolveActiveEntity<E>({ active, ids, entities }: EntityState<E> & (ActiveState | MultiActiveState)) {\n  if (isMultiActiveState(active)) {\n    return getExitingActives(active, ids);\n  }\n\n  if (hasEntity(entities, active) === false) {\n    return null;\n  }\n\n  return active;\n}\n\n// @internal\nexport function getExitingActives(currentActivesIds: ID[], newIds: ID[]) {\n  const filtered = currentActivesIds.filter(id => newIds.indexOf(id) > -1);\n  /** Return the same reference if nothing has changed */\n  if (filtered.length === currentActivesIds.length) {\n    return currentActivesIds;\n  }\n\n  return filtered;\n}\n"]}