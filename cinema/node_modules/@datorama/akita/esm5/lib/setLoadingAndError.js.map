{"version":3,"file":"setLoadingAndError.js","sourceRoot":"ng://@datorama/akita/","sources":["lib/setLoadingAndError.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAwC,MAAM,MAAM,CAAC;AACnE,OAAO,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AAGrC,MAAM,UAAU,kBAAkB,CAAI,KAAY;IAChD,OAAO,UAAa,MAAqB;QACvC,OAAO,KAAK,CAAC;YACX,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YACvB,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAErB,OAAO,MAAM,CAAC,IAAI,CAChB,GAAG,CAAC;gBACF,KAAK,YAAC,GAAG;oBACP,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;oBACxB,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;gBACtB,CAAC;gBACD,QAAQ;oBACN,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;gBAC1B,CAAC;aACF,CAAC,CACH,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;AACJ,CAAC","sourcesContent":["import { defer, MonoTypeOperatorFunction, Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { Store } from './store';\n\nexport function setLoadingAndError<T>(store: Store): MonoTypeOperatorFunction<T> {\n  return function <T>(source: Observable<T>) {\n    return defer(() => {\n      store.setLoading(true);\n      store.setError(null);\n\n      return source.pipe(\n        tap({\n          error(err) {\n            store.setLoading(false);\n            store.setError(err);\n          },\n          complete() {\n            store.setLoading(false);\n          },\n        })\n      );\n    });\n  };\n}\n"]}